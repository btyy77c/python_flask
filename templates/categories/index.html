{% extends 'layout/index.html' %}

{% block content %}
  <div class="card">
    <div class="card-content">
      <span class="card-title">Categories ({{ categories.__len__() }})</span>

      <ul class="collection">
        {% for category in categories %}
          <li class="collection-item">
            <h5>{{ category.name }}</h5>

            <a href="{{ url_for('CategoryShow', name=category.name) }}"><p>View Category</p></a>

            <a href="{{ url_for('ItemIndex', name=category.name) }}"><p>View Items</p></a>
          </li>
        {% endfor %}
      </ul>
    </div>

    <div class="card-action">
      <div id='createCategory' class='hidden'>
        <form>
          <div class="row">
            <div class="input-field">
              <input type="text" aria-label="Category Name" name="name" placeholder="Category Name">
            </div>
          </div>

          <button class="btn waves-effect waves-light">Create New Category</button>
        </form>
        <p id='createCategoryErrors'></p>
      </div>
    </div>
  </div>

  <div class='catgeory-index-header'>
    <h2>Latest Items</h2>
    <div id='createItem' class='hidden'>
      <form>
        <input type="text" aria-label="Item Title" name="title" placeholder="Item Title">

        <textarea aria-label="Item Description" name="description" placeholder="Item Description"></textarea>

        <select aria-label="Item Category" name="category_id">
          {% for category in categories %}
            <option value="{{ category.id }}">{{ category.name }}</option>
          {% endfor %}
        <select>

        <button>Create Item</button>
      </form>
      <p id='itemErrors'></p>
    </div>
  </div>

  <div class='catgeory-index-list'>
    {% for item in items %}
      <h3>{{ item.title }}</h3>
      <a href="{{ url_for('ItemShow', title=item.title) }}">
        <p>View Item</p>
      </a>
    {% endfor %}
  </div>
{% endblock %}
